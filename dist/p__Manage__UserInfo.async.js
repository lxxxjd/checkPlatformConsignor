(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"5av/":function(e,a,t){"use strict";t.r(a);t("IzEo");var s,n,o,r,i=t("bx4M"),l=(t("Q9mQ"),t("diRs")),c=(t("+L6B"),t("2/Rp")),p=(t("7Kak"),t("9yH6")),d=(t("5NDa"),t("5rEg")),m=(t("O3gP"),t("lrIw")),u=(t("MXD1"),t("CFYs")),g=(t("2qtc"),t("kLXV")),h=(t("miYZ"),t("tsqr")),f=(t("/xke"),t("TeRw")),v=t("p0pE"),b=t.n(v),y=t("2Taf"),w=t.n(y),E=t("vZ4D"),S=t.n(E),P=t("l4Ni"),N=t.n(P),k=t("ujKo"),O=t.n(k),C=t("MhPg"),M=t.n(C),V=(t("y8nQ"),t("Vl3Y")),F=(t("OaEy"),t("2fM7")),I=t("q1tI"),j=t.n(I),q=t("MuoO"),D=t("Y2fQ"),J=(t("zHco"),t("YmOK")),x=t.n(J),z=(t("wd/R"),F["a"].Option),L={ok:j.a.createElement("div",{className:x.a.success},j.a.createElement(D["FormattedMessage"],{id:"validation.password.strength.strong"})),pass:j.a.createElement("div",{className:x.a.warning},j.a.createElement(D["FormattedMessage"],{id:"validation.password.strength.medium"})),poor:j.a.createElement("div",{className:x.a.error},j.a.createElement(D["FormattedMessage"],{id:"validation.password.strength.short"}))},R={ok:"success",pass:"normal",poor:"exception"},T=(s=V["a"].create(),n=Object(q["connect"])(function(e){var a=e.manage,t=e.register,s=e.loading;return{manage:a,register:t,loading:s.models.manage}}),s(o=n((r=function(e){function a(){var e,t;w()(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return t=N()(this,(e=O()(a)).call.apply(e,[this].concat(n))),t.state={count:0,user:{},parents:[],help:"",visible:!1,passwordVisible:!1,phoneVisible:!1,companys:[]},t.handleSubmit=function(){var e=t.props,a=e.form,s=e.dispatch,n=a.validateFieldsAndScroll,o=JSON.parse(localStorage.getItem("consignor_userinfo"));n(function(e,n){e||(o.companyName=a.getFieldValue("companyName"),o.contactName=a.getFieldValue("contactName"),o.contactPhone=a.getFieldValue("contactPhone"),o.isvisible=a.getFieldValue("isvisible"),s({type:"manage/updateContact",payload:b()({},o),callback:function(e){200===e.code?(f["a"].open({message:"\u4fee\u6539\u6210\u529f"}),localStorage.setItem("userinfo",JSON.stringify(o)),t.componentDidMount()):f["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:e.data})}}))})},t.modifyPassword=function(){var e=t.props,a=e.form,s=e.dispatch,n=a.validateFieldsAndScroll,o=JSON.parse(localStorage.getItem("consignor_userinfo"));n(function(e,n){e||(o.password=a.getFieldValue("password"),s({type:"manage/updateContact",payload:b()({},o),callback:function(e){200===e.code?(f["a"].open({message:"\u4fee\u6539\u6210\u529f"}),t.setState({passwordVisible:!1}),localStorage.setItem("userinfo",JSON.stringify(o)),t.componentDidMount()):f["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:e.data})}}))})},t.modifyPhone=function(){var e=t.props,a=e.form,s=e.dispatch,n=a.validateFieldsAndScroll,o=JSON.parse(localStorage.getItem("consignor_userinfo"));n(function(e,n){e||(o.contactPhone=a.getFieldValue("contactPhone"),s({type:"register/verifyTel",payload:{tel:n.contactPhone,verifyCode:n.captcha},callback:function(e){"success"===e?s({type:"manage/updateContact",payload:b()({},o),callback:function(e){200===e.code?(f["a"].open({message:"\u4fee\u6539\u6210\u529f"}),t.setState({phoneVisible:!1}),localStorage.setItem("userinfo",JSON.stringify(o)),t.componentDidMount()):f["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:e.data})}}):h["a"].error("\u9a8c\u8bc1\u7801\u9519\u8bef")}}))})},t.checkPassword=function(e,a,s){!1===t.state.passwordVisible&&s();var n=t.state,o=n.visible,r=n.confirmDirty;if(a)if(t.setState({help:""}),o||t.setState({visible:!!a}),a.length<6)s("error");else{var i=t.props.form;a&&r&&i.validateFields(["confirm"],{force:!0}),s()}else t.setState({help:"\u8bf7\u8f93\u5165\u5bc6\u7801",visible:!!a}),s("error")},t.checkConfirm=function(e,a,s){var n=t.props.form;a&&a!==n.getFieldValue("password")?s("\u5bc6\u7801\u4e0d\u4e00\u81f4"):s()},t.showPassword=function(){t.setState({passwordVisible:!0})},t.handleCancel=function(){t.setState({passwordVisible:!1}),t.setState({phoneVisible:!1})},t.getPasswordStatus=function(){var e=t.props.form,a=e.getFieldValue("password");return a&&a.length>9?"ok":a&&a.length>5?"pass":"poor"},t.onGetCaptcha=function(){var e=59;t.setState({count:e}),t.interval=setInterval(function(){e-=1,t.setState({count:e}),0===e&&clearInterval(t.interval)},1e3);var a=t.props,s=a.form,n=a.dispatch,o=s.getFieldValue("contactPhone");void 0===o?h["a"].success("\u7535\u8bdd\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a"):n({type:"register/sendVerify",payload:{tel:o},callback:function(e){e&&("success"===e?h["a"].success("\u53d1\u9001\u6210\u529f"):g["a"].info({title:Object(D["formatMessage"])({id:"app.login.verification-code-warning.noExist"})}))}})},t.getRepeatTel=function(e,a,s){var n=t.props.dispatch;n({type:"register/getRepeatTel",payload:{tel:a},callback:function(e){void 0===e||"null"===e?s("\u53f7\u7801\u5df2\u6ce8\u518c"):"\u53f7\u7801\u5df2\u6ce8\u518c"===e?s("\u53f7\u7801\u5df2\u6ce8\u518c"):s()}})},t.showModifyPhone=function(){t.setState({phoneVisible:!0})},t.renderPasswordProgress=function(){var e=t.props.form,a=e.getFieldValue("password"),s=t.getPasswordStatus();return a&&a.length?j.a.createElement("div",{className:x.a["progress-".concat(s)]},j.a.createElement(u["a"],{status:R[s],className:x.a.progress,strokeWidth:6,percent:10*a.length>100?100:10*a.length,showInfo:!1})):null},t.handleCompanySearch=function(e){var a=t.props.dispatch;a({type:"manage/getBusiness",payload:{name:e},callback:function(e){t.setState({companys:e})}})},t}return M()(a,e),S()(a,[{key:"componentDidMount",value:function(){var e=this.props,a=(e.dispatch,e.form),t=JSON.parse(localStorage.getItem("consignor_userinfo"));this.setState({user:t}),a.setFieldsValue({companyName:t.companyName,contactName:t.contactName,isvisible:t.isvisible,contactPhone:t.contactPhone})}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator,t={labelCol:{span:6},wrapperCol:{span:14}},s=this.state,n=s.user,o=s.help,r=s.visible,u=s.passwordVisible,h=s.phoneVisible,f=s.count,v=s.companys,b=v.map(function(e){return j.a.createElement(z,{key:e,value:e},e)});return j.a.createElement(i["a"],null,j.a.createElement(V["a"],t,j.a.createElement(V["a"].Item,{label:"\u7528\u6237\u540d"},j.a.createElement("span",{className:"ant-form-text"},n.userName)),j.a.createElement(V["a"].Item,{label:"\u516c\u53f8\u540d\uff1a"},a("companyName",{rules:[{required:!0,message:Object(D["formatMessage"])({id:"validation.company.required"})}]})(j.a.createElement(m["a"],{className:"global-search",dataSource:b,onSearch:this.handleCompanySearch,placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u540d"}))),j.a.createElement(V["a"].Item,{label:"\u59d3\u540d\uff1a"},a("contactName",{rules:[{required:!0,message:Object(D["formatMessage"])({id:"validation.contact.required"})}]})(j.a.createElement(d["a"],{size:"large",placeholder:Object(D["formatMessage"])({id:"form.contact.placeholder"})}))),j.a.createElement(V["a"].Item,{label:"\u624b\u673a\u53f7\u7801\uff1a"},j.a.createElement("span",{className:"ant-form-text"},n.contactPhone),j.a.createElement(I["Fragment"],null,j.a.createElement("a",{onClick:function(){return e.showModifyPhone()}},"\xa0\xa0\u4fee\u6539\u624b\u673a"))),j.a.createElement(V["a"].Item,{label:"\u624b\u673a:"},a("isvisible",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u662f\u5426\u53ef\u89c1"}]})(j.a.createElement(p["a"].Group,null,j.a.createElement(p["a"],{value:"\u53ef\u89c1"},"\u53ef\u89c1"),j.a.createElement(p["a"],{value:"\u4e0d\u53ef\u89c1"},"\u4e0d\u53ef\u89c1")))),j.a.createElement(V["a"].Item,{wrapperCol:{span:12,offset:6}},j.a.createElement(c["a"],{type:"primary",onClick:this.showPassword},"\u4fee\u6539\u5bc6\u7801"),"\xa0\xa0\xa0\xa0\xa0\xa0",j.a.createElement(c["a"],{type:"primary",onClick:this.handleSubmit},"\u4fdd\u5b58")),j.a.createElement(g["a"],{title:"\u4fee\u6539\u5bc6\u7801",visible:u,onOk:this.modifyPassword,onCancel:this.handleCancel},j.a.createElement(V["a"].Item,{label:"\u5bc6\u7801:",help:o},j.a.createElement(l["a"],{getPopupContainer:function(e){return e.parentNode},content:j.a.createElement("div",{style:{padding:"4px 0"}},L[this.getPasswordStatus()],this.renderPasswordProgress(),j.a.createElement("div",{style:{marginTop:10}},j.a.createElement(D["FormattedMessage"],{id:"validation.password.strength.msg"}))),overlayStyle:{width:240},placement:"right",visible:r},a("password",{rules:[{validator:this.checkPassword}]})(j.a.createElement(d["a"],{size:"large",type:"password",placeholder:Object(D["formatMessage"])({id:"form.password.placeholder"})})))),j.a.createElement(V["a"].Item,{label:"\u786e\u8ba4\u5bc6\u7801:"},a("confirm",{rules:[u?[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]:[],{validator:this.checkConfirm}]})(j.a.createElement(d["a"],{size:"large",type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})))),j.a.createElement(g["a"],{title:"\u4fee\u6539\u624b\u673a",visible:h,onOk:this.modifyPhone,onCancel:this.handleCancel},j.a.createElement(V["a"].Item,{label:"\u624b\u673a\u53f7:"},a("contactPhone",{rules:[{required:!0,message:Object(D["formatMessage"])({id:"validation.phone-number.required"})},{pattern:/^\d{11}$/,message:Object(D["formatMessage"])({id:"validation.phone-number.wrong-format"})},{validator:this.getRepeatTel}]})(j.a.createElement(d["a"],{size:"large",style:{width:"75%"},placeholder:Object(D["formatMessage"])({id:"form.phone-number.placeholder"})}))),j.a.createElement(V["a"].Item,{label:"\u9a8c\u8bc1\u7801:"},a("captcha",{rules:h?[{required:!0,message:Object(D["formatMessage"])({id:"validation.verification-code.required"})}]:[]})(j.a.createElement(d["a"],{size:"large",style:{width:"50%"},placeholder:Object(D["formatMessage"])({id:"form.verification-code.placeholder"})})),j.a.createElement(c["a"],{size:"large",disabled:f,className:x.a.getCaptcha,onClick:this.onGetCaptcha},f?"".concat(f," s"):Object(D["formatMessage"])({id:"app.register.get-verification-code"}))))))}}]),a}(I["PureComponent"]),o=r))||o)||o);a["default"]=T},YmOK:function(e,a,t){e.exports={tableList:"antd-pro-pages-manage-user-info-tableList",tableListOperator:"antd-pro-pages-manage-user-info-tableListOperator",tableListForm:"antd-pro-pages-manage-user-info-tableListForm",submitButtons:"antd-pro-pages-manage-user-info-submitButtons"}}}]);