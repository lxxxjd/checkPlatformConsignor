(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{cDD2:function(e,a,t){"use strict";t.r(a);t("IzEo");var n,l,o,r,i=t("bx4M"),c=(t("g9YV"),t("wCAj")),s=t("jehZ"),d=t.n(s),u=(t("14J3"),t("BMrR")),m=(t("+L6B"),t("2/Rp")),p=(t("jCWc"),t("kPKH")),f=(t("miYZ"),t("tsqr")),h=t("p0pE"),g=t.n(h),b=t("2Taf"),E=t.n(b),v=t("vZ4D"),y=t.n(v),C=t("l4Ni"),V=t.n(C),S=t("ujKo"),k=t.n(S),M=t("MhPg"),F=t.n(M),I=(t("2qtc"),t("kLXV")),w=(t("5NDa"),t("5rEg")),O=(t("6UJt"),t("DFOY")),D=(t("OaEy"),t("2fM7")),N=(t("y8nQ"),t("Vl3Y")),P=t("q1tI"),Y=t.n(P),J=t("MuoO"),L=(t("Y2fQ"),t("zHco")),q=t("wd/R"),H=t.n(q),A=t("glGN"),j=t.n(A),z=t("TNiW"),R=N["a"].Item,x=D["a"].Option,B=N["a"].create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleEdit,l=e.handleModalVisible,o=e.modalInfo,r=e.placecodes,i=function(){t.validateFields(function(e,a){e||(t.resetFields(),n(a,o))})};return Y.a.createElement(I["a"],{destroyOnClose:!0,title:"\u5730\u70b9\u4fee\u6539",style:{top:100},visible:a,onOk:i,onCancel:function(){return l()}},Y.a.createElement(R,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6240\u5c5e\u5730\u533a"},t.getFieldDecorator("placecodes",{initialValue:r,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6240\u5c5e\u5730\u533a"}]})(Y.a.createElement(O["a"],{style:{width:300},options:z["a"],placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5730\u533a"}))),Y.a.createElement(R,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5730\u70b9\u540d\u79f0"},t.getFieldDecorator("placename",{initialValue:o.placename,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5730\u70b9\u540d\u79f0"}]})(Y.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165\u5730\u70b9\u540d\u79f0"}))))}),K=N["a"].create()(function(e){var a=e.addModalVisible,t=e.form,n=e.handleAdd,l=e.addHandleModalVisible,o=function(){t.validateFields(function(e,a){e||(t.resetFields(),n(a))})};return Y.a.createElement(I["a"],{destroyOnClose:!0,title:"\u5730\u70b9\u65b0\u589e",style:{top:100},visible:a,onOk:o,onCancel:function(){return l()}},Y.a.createElement(R,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6240\u5c5e\u5730\u533a"},t.getFieldDecorator("placecodes",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6240\u5c5e\u5730\u533a"}]})(Y.a.createElement(O["a"],{style:{width:300},options:z["a"],placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5730\u533a"}))),Y.a.createElement(R,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5730\u70b9\u540d\u79f0"},t.getFieldDecorator("placename",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5730\u70b9\u540d\u79f0"}]})(Y.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165\u5730\u70b9\u540d\u79f0"}))))}),Q=(n=Object(J["connect"])(function(e){var a=e.manage,t=e.loading;return{manage:a,loading:t.models.manage}}),l=N["a"].create(),n(o=l((r=function(e){function a(){var e,t;E()(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return t=V()(this,(e=k()(a)).call.apply(e,[this].concat(l))),t.state={modalVisible:!1,addModalVisible:!1,modalInfo:{},dataSource:[],placecodes:[],searchOption:"placename"},t.columns=[{title:"\u6240\u5c5e\u5730\u533a",dataIndex:"placecode",render:function(e){return t.getPlaceFromCode(e)}},{title:"\u5730\u70b9\u540d\u79f0",dataIndex:"placename"},{title:"\u64cd\u4f5c",render:function(e,a){return Y.a.createElement(P["Fragment"],null,Y.a.createElement("a",{onClick:function(){return t.modifyItem(e,a)}},"\u4fee\u6539"),"\xa0\xa0",Y.a.createElement("a",{onClick:function(){return t.deleteItem(e,a)}},"\u5220\u9664"))}}],t.getPlaceFromCode=function(e){var a="".concat(e.substring(0,2),"0000"),t="".concat(e.substring(0,4),"00"),n=e,l=z["a"].find(function(e){return e.value===a});if(void 0===l)return Y.a.createElement("span",null,n);var o=l.children.find(function(e){return e.value===t}),r=o.children.find(function(e){return e.value===n});return Y.a.createElement("span",null,l.label,"/",o.label,"/",r.label)},t.init=function(){var e=JSON.parse(localStorage.getItem("consignor_userinfo")),a=t.props.dispatch,n={consigoruser:e.userName};a({type:"manage/getConfigorPlaceList",payload:n,callback:function(e){e&&(t.state.dataSource=e.data)}})},t.handleFormReset=function(){var e=t.props.form;e.resetFields(),t.setState({searchOption:"placename"}),t.init()},t.handleSearch=function(e){e.preventDefault();var a=t.props,n=a.dispatch,l=a.form;l.validateFields(function(e,a){if(!e){var l,o=JSON.parse(localStorage.getItem("consignor_userinfo"));l="placename"===t.state?a.value.trim():a.value[2];var r=g()({},a,{kind:a.kind.trim(),value:l,consigoruser:o.userName});n({type:"manage/getConfigorPlaceList",payload:r,callback:function(e){e&&(t.state.dataSource=e.data)}})}})},t.isValidDate=function(e){return void 0!==e&&null!==e?Y.a.createElement("span",null,H()(e).format("YYYY-MM-DD")):[]},t.modifyItem=function(e){var a=[];a.push("".concat(e.placecode.substring(0,2),"0000")),a.push("".concat(e.placecode.substring(0,4),"00")),a.push(e.placecode),t.setState({modalInfo:e,placecodes:a}),t.handleModalVisible(!0)},t.deleteItem=function(e){var a=t.props.dispatch;a({type:"manage/deleteConfigorPlace",payload:{keyno:e.keyno},callback:function(e){400===e.code?f["a"].error("\u5220\u9664\u5931\u8d25"):(f["a"].success("\u5220\u9664\u6210\u529f"),t.init())}})},t.addItem=function(){t.addHandleModalVisible(!0)},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.addHandleModalVisible=function(e){t.setState({addModalVisible:!!e})},t.handleEdit=function(e,a){var n=t.props.dispatch,l={placename:e.placename,placecode:e.placecodes[2],consigoruser:a.consigoruser,keyno:a.keyno};if(t.state.dataSource.find(function(a){return a.placename===e.placename&&a.placecode===e.placecodes[2]}))return f["a"].info("\u6dfb\u52a0\u5730\u70b9\u5df2\u5b58\u5728"),void t.setState({modalVisible:!1});n({type:"manage/updateConfigorPlace",payload:l,callback:function(e){"success"===e?(f["a"].success("\u4fdd\u5b58\u6210\u529f"),t.init()):f["a"].error("\u4fdd\u5b58\u5931\u8d25")}}),t.setState({modalVisible:!1})},t.handleAdd=function(e){var a=t.props.dispatch,n=JSON.parse(localStorage.getItem("consignor_userinfo")),l={placename:e.placename,placecode:e.placecodes[2],consigoruser:n.userName,keyno:e.keyno};if(t.state.dataSource.find(function(a){return a.placename===e.placename&&a.placecode===e.placecodes[2]}))return f["a"].info("\u6dfb\u52a0\u5730\u70b9\u5df2\u5b58\u5728"),void t.setState({addModalVisible:!1});t.setState({addModalVisible:!1}),a({type:"manage/addConfigorPlace",payload:l,callback:function(e){"success"===e?(f["a"].success("\u4fdd\u5b58\u6210\u529f"),t.init()):f["a"].error("\u4fdd\u5b58\u5931\u8d25")}})},t.onChangeSearch=function(e){t.setState({searchOption:e})},t}return F()(a,e),y()(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.searchOption;return Y.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},Y.a.createElement(u["a"],{gutter:{md:8,lg:24,xl:48}},Y.a.createElement(p["a"],{md:3,sm:20},Y.a.createElement(N["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{initialValue:"placename",rules:[{message:"\u641c\u7d22\u7c7b\u578b"}]})(Y.a.createElement(D["a"],{placeholder:"\u641c\u7d22\u7c7b\u578b",onChange:this.onChangeSearch},Y.a.createElement(x,{value:"placename"},"\u5730\u70b9\u540d\u79f0"),Y.a.createElement(x,{value:"placecode"},"\u6240\u5c5e\u533a\u57df"))))),Y.a.createElement(p["a"],{md:6,sm:20},Y.a.createElement(R,null,e("value",{rules:[]})("placename"===a?Y.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165"}):Y.a.createElement(O["a"],{options:z["a"],placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5730\u533a"})))),Y.a.createElement(p["a"],{md:8,sm:20},Y.a.createElement("span",{className:j.a.submitButtons},Y.a.createElement(m["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),Y.a.createElement(m["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),Y.a.createElement(m["a"],{type:"primary",style:{marginLeft:8},onClick:this.addItem},"\u65b0\u589e")))))}},{key:"render",value:function(){var e=this.props,a=e.loading,t=e.dispatch,n=this.state,l=n.modalVisible,o=n.modalInfo,r=n.addModalVisible,s=n.dataSource,u=n.placecodes,m={handleEdit:this.handleEdit,handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,addHandleModalVisible:this.addHandleModalVisible};return Y.a.createElement(L["a"],null,Y.a.createElement(i["a"],{bordered:!1,size:"small"},Y.a.createElement("div",{className:j.a.tableList},Y.a.createElement(B,d()({},m,{modalVisible:l,modalInfo:o,dispatch:t,placecodes:u})),Y.a.createElement(K,d()({},m,{addModalVisible:r,dispatch:t})),Y.a.createElement("div",{className:j.a.tableListForm},this.renderSimpleForm()),Y.a.createElement(c["a"],{size:"middle",loading:a,dataSource:s,columns:this.columns,rowKey:"keyno",pagination:{showQuickJumper:!0,showSizeChanger:!0}}))))}}]),a}(P["PureComponent"]),o=r))||o)||o);a["default"]=Q}}]);